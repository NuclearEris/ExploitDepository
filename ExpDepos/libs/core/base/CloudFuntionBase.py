#!/usr/bin/env python

"""
@Author: Castiel
@Email:  ca3tie1@gmail.com
@Blog:   https://ca3tie1.github.io
@Git:    https://github.com/ca3tie1
@Wechat: Ca5tie1
@Date:   2021/8/25 22:01
"""

import os


class CloudFunctionBase(object):
    """
    云函数(Serverless Cloud Function)基类
    """

    def __init__(self, scfCfg, useGlobal=False):
        self._scfCfg = scfCfg
        self._useGlobal = useGlobal  # 使用全球地域
        self.api_gateways = list()  # 云函数api网关接口地址列表
        self._cache_dir = self.RootPath + os.sep + 'data' + os.sep + 'scf'  # 缓存地址
        self._functionName = "ExpDeposRequestProxy"

    @property
    def RootPath(self) -> str:
        return os.path.abspath(os.path.dirname(os.path.abspath(__file__)) + "/../../../../".replace('/', os.sep))

    @property
    def SecretId(self) -> str:
        """
        SecretId

        :return:
        """
        return self._scfCfg['SecretId']

    @property
    def SecretKey(self) -> str:
        """
        SecretKey

        :return:
        """
        return self._scfCfg['SecretKey']

    @property
    def useGlobal(self) -> bool:
        """
        使用全球地区

        :return:
        """
        return self._useGlobal

    @property
    def cache_dir(self):
        """
        缓存地址

        :return:
        """
        return self._cache_dir + os.sep if not self._cache_dir.endswith(os.sep) else ''

    @property
    def functionName(self):
        """
        云函数默认名称

        :return:
        """
        return self._functionName

    def getApis(self) -> list:
        raise NotImplementedError

    def clearAll(self):
        raise NotImplementedError
